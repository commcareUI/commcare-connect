<!-- 
 Required Params:
 {{icon}}
 {{options}}
 {{input_id}}
 {{label}}
-->
<div class="max-w-md min-w-[300px] mx-auto p-6">
    <div x-data="{
      open: false,
      selectedOption: '',
      leftIcon: '{{icon}}', 
      dropdownOptions: {{options}},
      get shouldLabelFloat() {
        return this.selectedOption || this.open;
      }
    }">
      <!-- Text field with dropdown -->
      <div class="textfield-wrapper relative w-full">
        <div class="relative">
          <!-- Fixed left icon -->
          <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-black">
            <i :class="leftIcon"></i>
          </div>
          
          <input 
            type="text" 
            id="{{input_id}}"             
            placeholder=""
            class="peer w-full px-3 py-2.5 border border-brand-border-light focus:outline-none focus:border-brand-border-light hover:border-brand-border-light text-brand-blue-light bg-white rounded-md outline-none transition-colors duration-200"
            :class="{'pl-10': leftIcon, 'pr-10': true}"
            readonly
            @click="open = !open"
            x-model="selectedOption"
            @keydown.escape="open = false"
          />
          
          <label for="{{input_id}}" class="absolute left-1 top-0 text-xs transition-all duration-200 origin-[0%] -translate-y-1/2 bg-white px-1 pointer-events-none text-brand-blue-light"
            :class="{
              'left-10': leftIcon,
              'top-0 text-xs translate-x-[-60%]': shouldLabelFloat,
              'top-1/2': !shouldLabelFloat
            }">
            <span>{{label}}</span>
          </label>
          
          <!-- Dropdown toggle button -->
          <div class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-500 focus:outline-none">
            <i class="fas fa-chevron-down transition-transform duration-200" :class="{ 'rotate-180': open }"></i>
          </div>
        </div>
  
        <!-- Dropdown menu -->
        <div 
          x-show="open"
          x-cloak
          @click.outside="open = false"
          x-transition:enter="transition ease-out duration-100"
          x-transition:enter-start="transform opacity-0 scale-95"
          x-transition:enter-end="transform opacity-100 scale-100"
          x-transition:leave="transition ease-in duration-75"
          x-transition:leave-start="transform opacity-100 scale-100"
          x-transition:leave-end="transform opacity-0 scale-95"
          class="absolute z-10 w-full mt-2 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"
        >
          <div class="py-1">
            <template x-for="option in dropdownOptions" :key="option">
              <span
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" 
                @click.prevent="selectedOption = option; open = false"
              >
                <span x-text="option"></span>
              </span>              
            </template>
          </div>
        </div>
      </div>
    </div>
  </div>