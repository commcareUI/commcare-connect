{% extends "tailwind/base.html" %} 
{% block content %}
<p class="px-4 mb-5 text-sm font-medium text-brand-deep-purple">Opportunity Name</p>
<div 
    class="flex flex-col w-full gap-2"
    x-data="{
        selectedTab: '',
        selectedOption: '',
    }"
    x-init="selectedTab='payments';selectedOption=''" 
>
    <!-- Tabs -->
    <div class="flex mx-auto items-center justify-between w-[1344px] px-4 bg-slate-50 rounded-lg shadow-sm h-14">
      <div class="flex h-full gap-x-6">
        <div 
            @click="selectedTab = 'workers'; selectedRows = []; $nextTick(() => { 
                htmx.trigger('#workers-tab', 'loadWorkers');
            })"
            id="workers-tab"
            class="relative cursor-pointer text-sm h-full flex items-center"
            :class="{
                'text-brand-deep-purple font-medium': selectedTab === 'workers',
                'text-gray-500': selectedTab !== 'workers'
            }"
            hx-get="/a/test-1/opportunity/1/tw/worker_list/" 
            hx-swap="innerHTML" 
            hx-trigger="loadWorkers" 
            hx-target="#opportunity_worker_container"
        >
            <span>Workers</span>
            <div 
                class="absolute bottom-0 left-1/2 -translate-x-1/2 w-2/3 h-1.5 bg-brand-mango rounded-t-lg"
                x-show="selectedTab === 'workers'"
            ></div>
        </div>
        <div 
            @click="selectedTab = 'learn'; selectedRows = []; $nextTick(() => { 
                htmx.trigger('#learn-tab', 'loadLearn');
            })"
            id="learn-tab"
            class="relative cursor-pointer text-sm h-full flex items-center"
            :class="{
                'text-brand-deep-purple font-medium': selectedTab === 'learn',
                'text-gray-500': selectedTab !== 'learn'
            }"
            hx-get="/a/test-1/opportunity/1/tw/worker_learn/" 
            hx-swap="innerHTML" 
            hx-trigger="loadLearn" 
            hx-target="#opportunity_worker_container"
        >
            <span>Learn</span>
            <div 
                class="absolute bottom-0 left-1/2 -translate-x-1/2 w-2/3 h-1.5 bg-brand-mango rounded-t-lg"
                x-show="selectedTab === 'learn'"
            ></div>
        </div>
        <div 
            @click="selectedTab = 'delivery'; selectedRows = []; $nextTick(() => { 
                htmx.trigger('#delivery-tab', 'loadDelivery');
            })"
            id="delivery-tab"
            class="relative cursor-pointer text-sm h-full flex items-center"
            :class="{
                'text-brand-deep-purple font-medium': selectedTab === 'delivery',
                'text-gray-500': selectedTab !== 'delivery'
            }"
            hx-get="/a/test-1/opportunity/1/tw/worker_delivery/" 
            hx-swap="innerHTML" 
            hx-trigger="loadDelivery" 
            hx-target="#opportunity_worker_container"
        >
            <span>Delivery</span>
            <div 
                class="absolute bottom-0 left-1/2 -translate-x-1/2 w-2/3 h-1.5 bg-brand-mango rounded-t-lg"
                x-show="selectedTab === 'delivery'"
            ></div>
        </div>
        <div 
            @click="selectedTab = 'payments'; selectedRows = []; $nextTick(() => { 
                htmx.trigger('#payments-tab', 'loadPayments');
            })"
            id="payments-tab"
            class="relative cursor-pointer text-sm h-full flex items-center"
            :class="{
                'text-brand-deep-purple font-medium': selectedTab === 'payments',
                'text-gray-500': selectedTab !== 'payments'
            }"
            hx-get="/a/test-1/opportunity/1/tw/worker_payments/" 
            hx-swap="innerHTML" 
            hx-trigger="loadPayments" 
            hx-target="#opportunity_worker_container"
        >
            <span>Payments</span>
            <div 
                class="absolute bottom-0 left-1/2 -translate-x-1/2 w-2/3 h-1.5 bg-brand-mango rounded-t-lg"
                x-show="selectedTab === 'payments'"
            ></div>
        </div>
    </div>
    
    

        <!-- Payment Options -->
        <div x-show="selectedTab === 'payments'" class="flex gap-x-1">
            <button 
                type="button" 
                class="w-10 aspect-square hover:bg-gray-200/20 rounded-full"
                @click="selectedOption = 'paymentHistory'; console.log(selectedOption)"
                :class="{ 'bg-brand-marigold/20 text-white': selectedOption === 'paymentHistory' }"
            >
                <i class="fa-light fa-clock-rotate-left text-brand-deep-purple"></i>
            </button>
            <button 
                type="button" 
                class="w-10 aspect-square hover:bg-gray-200/20 rounded-full"
            >
                <i class="fa-light fa-upload text-brand-deep-purple"></i>
            </button>
            <button 
                type="button" 
                class="w-10 aspect-square hover:bg-gray-200/20 rounded-full"
            >
                <i class="fa-light fa-download text-brand-deep-purple"></i>
            </button>
            <button 
                type="button" 
                class="w-10 aspect-square hover:bg-gray-200/20 rounded-full"
            >
                <i class="fa-light fa-sliders-simple text-brand-deep-purple"></i>
            </button>
        </div>
        <div x-show="selectedTab === 'learn'" class="flex gap-x-1">
         
          <button 
              type="button" 
              class="w-10 aspect-square hover:bg-gray-200/20 rounded-full"
          >
              <i class="fa-light fa-user-slash text-brand-deep-purple"></i>
          </button>
          <button 
              type="button" 
              class="w-10 aspect-square hover:bg-gray-200/20 rounded-full"
          >
              <i class="fa-light fa-download text-brand-deep-purple"></i>
          </button>
          <button 
              type="button" 
              class="w-10 aspect-square hover:bg-gray-200/20 rounded-full"
          >
              <i class="fa-light fa-sliders-simple text-brand-deep-purple"></i>
          </button>
      </div>
    </div>

    <!-- Tab Content Container -->
    <div id="opportunity_worker_container" class="max-w-screen mx-auto" hx-get="/a/test-1/opportunity/1/tw/worker_payments/" hx-swap="innerHTML" hx-trigger="load">
    </div>
</div>
{% endblock content %}